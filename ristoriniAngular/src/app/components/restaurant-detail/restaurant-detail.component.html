<div class="restaurant-detail">
  <button (click)="goBack()" class="back-button">← Volver al inicio</button>

  <div *ngIf="loading" class="loading">
    <p>Cargando información del restaurante...</p>
  </div>

  <div *ngIf="error" class="error">
    <p>{{ error }}</p>
    <button (click)="goBack()" class="back-button">Volver al inicio</button>
  </div>

  <!-- Usamos vm normalizado -->
  <div *ngIf="!loading && !error && vm as r" class="restaurant-content">
    <div class="restaurant-header">
      <h1>{{ r.name }}</h1>
      <span class="cuisine-type">{{ r.cuisineType }}</span>
    </div>

    <div class="restaurant-image">
      <img
        [src]="r.imageUrl || 'https://via.placeholder.com/400x200?text=Imagen+no+disponible'"
        [alt]="r.name"
        class="restaurant-img"
        (error)="onImageError($event)"
      />
    </div>

    <div class="restaurant-info">
      <p class="description">{{ r.description }}</p>

      <div class="branches-section" *ngIf="r.branches?.length">
        <h3>Sucursales</h3>
        <ul>
          <li *ngFor="let b of r.branches">
            <!-- si b es string, se muestra; si es objeto, intentamos algunos campos comunes -->
            {{ (b?.name || b?.nombre || b?.address || b?.direccion || b) }}
          </li>
        </ul>
      </div>

      <div *ngIf="!r.branches?.length" class="no-branches">
        <p>No hay información de sucursales disponible.</p>
      </div>
    </div>
  </div>

  <div *ngIf="!loading && !error && !vm" class="no-restaurant">
    <p>No se encontró información del restaurante.</p>
    <button (click)="goBack()" class="back-button">Volver al inicio</button>
  </div>
</div>
